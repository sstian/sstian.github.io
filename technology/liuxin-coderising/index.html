<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="码农翻身, Tian,KS,Tech,Website">
    <meta name="description" content="personal website for sharing">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>码农翻身 | sstian</title>
    <link rel="icon" type="image/png" href="../../favicon.png">

    <link rel="stylesheet" type="text/css" href="../../libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="../../libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="../../libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="../../libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="../../libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/matery.css">
    <link rel="stylesheet" type="text/css" href="../../css/my.css">

    <script src="../../libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="atom.xml" title="sstian" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="../../index.html" class="waves-effect waves-light">
                    
                    <img src="../../medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">sstian</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../index.html" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="../../friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Media</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="../../music">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Music</span>
        </a>
      </li>
      
      <li>
        <a href="../../movie">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Movie</span>
        </a>
      </li>
      
      <li>
        <a href="../../books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Books</span>
        </a>
      </li>
      
      <li>
        <a href="../../gallery">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Gallery</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="../../medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">sstian</div>
        <div class="logo-desc">
            
            personal website for sharing
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="../../index.html" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="../../tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="../../categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="../../archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="../../about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="../../contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="../../friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Media
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="../../music " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>Music</span>
                  </a>
                </li>
              
                <li>

                  <a href="../../movie " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>Movie</span>
                  </a>
                </li>
              
                <li>

                  <a href="../../books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>Books</span>
                  </a>
                </li>
              
                <li>

                  <a href="../../gallery " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>Gallery</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://blinkfox.github.io/" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://blinkfox.github.io/" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="../../libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '../../index.html';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('../../medias/featureimages/11.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">码农翻身</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="../../libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="../../tags/%E5%88%98%E6%AC%A3/">
                                <span class="chip bg-color">刘欣</span>
                            </a>
                        
                            <a href="../../tags/coderising/">
                                <span class="chip bg-color">coderising</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="../../categories/Technology/" class="post-category">
                                Technology
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-11-10
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-11-26
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    8.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    33 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="../../libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>刘欣，15年的软件行业从业经验，前IBM系统架构师。<br>擅长企业应用架构和设计，领导过多个企业级应用架构设计和开发工作。</p>
<h2 id="半小时漫画计算机"><a href="#半小时漫画计算机" class="headerlink" title="半小时漫画计算机"></a>半小时漫画计算机</h2><h3 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h3><p>多线程抢占式调度。<br>协程：可自主暂停 &lt;= 运行控制权转移，完全由程序调度和掌控。</p>
<p>CPU =&gt; 取指令，译码，执行，写回。</p>
<p>浮点数运算：小数变整数，记录小数位。<br><code>Java: BigDecimal. Python: Decimal. Ruby: BigDecimal</code></p>
<h4 id="一切皆文件"><a href="#一切皆文件" class="headerlink" title="一切皆文件"></a>一切皆文件</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// File</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>open<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>close<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>read<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>write<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token comment">// Socket=(IP, Port)</span>
服务器监听 listen
客户端连接 connect
然后读写 read<span class="token operator">/</span>write
最后关闭 close<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="函数栈"><a href="#函数栈" class="headerlink" title="函数栈"></a>函数栈</h4><p>栈帧：栈中的元素。<br>ESP=Extended Stack Pointer 扩展栈指针寄存器。存放函数栈顶指针<br>EBP=Extended Base Pointer 扩展基址指针寄存器。存放函数栈底指针</p>
<h4 id="C文件编译"><a href="#C文件编译" class="headerlink" title="C文件编译"></a>C文件编译</h4><p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/C%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91.jpg" alt="C文件编译"></p>
<h4 id="32位CPU寄存器"><a href="#32位CPU寄存器" class="headerlink" title="32位CPU寄存器"></a>32位CPU寄存器</h4><p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/32%E4%BD%8DCPU%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="32位CPU寄存器"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/32%E4%BD%8DCPU%E5%AF%84%E5%AD%98%E5%99%A8-%E5%8F%AF%E7%BC%96%E7%A8%8B.png" alt="32位CPU寄存器-可编程"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/32%E4%BD%8DCPU%E5%AF%84%E5%AD%98%E5%99%A8-%E9%80%9A%E7%94%A8.png" alt="32位CPU寄存器-通用"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/32%E4%BD%8DCPU%E5%AF%84%E5%AD%98%E5%99%A8-%E6%AE%B5-2.png" alt="32位CPU寄存器-段"></p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><h4 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h4><p>A = Atomicity 原子性：要么不做，要么全做。<br>C = Consistency 一致性：数据库保持完整性。<br>I = Isolation 隔离性：多事务并发执行。<br>D = Durability 持久性：数据的修改是永久的。</p>
<p>排它锁/X锁：Exclusive Lock。用于写数据。<br>共享锁/S锁：Share Lock。用于读数据。</p>
<table>
<thead>
<tr>
<th>加锁程度</th>
<th>隔离级别</th>
<th>更新丢失</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>X, 直到事务结束</td>
<td>读未提交 Read Uncommitted</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>X+S: 读完立即释放</td>
<td>读已提交 Read Committed</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
</tr>
<tr>
<td>X+S, 直到事务结束</td>
<td>可重复读 Repeatable Read</td>
<td>Y</td>
<td>Y</td>
<td>Y - 锁行</td>
<td></td>
</tr>
<tr>
<td>串行执行</td>
<td>串行化 Serializable</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y - 锁表</td>
</tr>
</tbody></table>
<h4 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h4><p>初始值：A=200, B=100</p>
<table>
<thead>
<tr>
<th>流程</th>
<th>事务T1</th>
<th>Undo日志文件</th>
<th></th>
<th>Redo日志文件</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td></td>
<td>&lt;T1, 开始&gt;</td>
<td>事务开始</td>
<td>&lt;T1, 开始&gt;</td>
<td>事务开始</td>
</tr>
<tr>
<td>2</td>
<td></td>
<td>&lt;T1, A, 200&gt;</td>
<td>记录A的<strong>初始值</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>A := A - 50</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td>&lt;T1, A, 150&gt;</td>
<td>记录A的<strong>最新值</strong></td>
</tr>
<tr>
<td>5</td>
<td></td>
<td>&lt;T1, B, 100&gt;</td>
<td>记录B的<strong>初始值</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>B := B + 50</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td>&lt;T1, B, 150&gt;</td>
<td>记录B的<strong>最新值</strong></td>
</tr>
<tr>
<td>8</td>
<td></td>
<td></td>
<td></td>
<td>&lt;T1, 提交&gt;</td>
<td>事务提交，<br>在A, B<strong>写入磁盘之前</strong></td>
</tr>
<tr>
<td>9</td>
<td>把A写入磁盘</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>把B写入磁盘</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>11</td>
<td></td>
<td>&lt;T1, 提交&gt;</td>
<td>事务提交，<br>在A, B<strong>写入磁盘之后</strong></td>
<td>&lt;T1, 结束&gt;</td>
<td></td>
</tr>
</tbody></table>
<p><strong>恢复策略：</strong></p>
<ul>
<li><p>Undo日志文件</p>
<ol>
<li>系统重启时，检查Undo日志文件；</li>
<li>对于事务T1，若没有<code>&lt;T1, 提交&gt;</code>记录，表示该事务在执行过程中失败了，则恢复操作；</li>
<li>利用Undo日志中记录的A, B的初始值。由于幂等性，恢复多少遍结果都一样；</li>
<li>恢复完，在日志文件中加上<code>&lt;T1, 回滚&gt;</code>，表示下次不再恢复与T1相关的。</li>
</ol>
</li>
<li><p>Redo日志文件</p>
<ol>
<li>在Redo日志文件中查找日志：有<code>&lt;T1, 提交&gt;</code>但没有<code>&lt;T1, 结束&gt;</code>；</li>
<li>把A, B的新值写入磁盘；</li>
<li>最后加上<code>&lt;T1, 结束&gt;</code>。</li>
</ol>
</li>
</ul>
<h3 id="编程语言"><a href="#编程语言" class="headerlink" title="编程语言"></a>编程语言</h3><h4 id="执行方式"><a href="#执行方式" class="headerlink" title="执行方式"></a>执行方式</h4><blockquote>
<p>MSIL=Microsoft Intermediate Language 微软中间语言</p>
</blockquote>
<table>
<thead>
<tr>
<th>执行方式</th>
<th>编程语言</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>1. 编译执行</td>
<td>Ada, C, C++, Rust, Go</td>
<td>执行快；难以跨平台</td>
</tr>
<tr>
<td>2. 字节码：编译+解释</td>
<td>Java</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Clojure, Scala, Jython, JRuby, Groovy, Kotlin</td>
<td>编译成Java字节码</td>
</tr>
<tr>
<td></td>
<td>Ruby, PHP, Perl, Python</td>
<td>创建自己的字节码</td>
</tr>
<tr>
<td></td>
<td>C#, VB.NET</td>
<td>MSIL</td>
</tr>
</tbody></table>
<h4 id="面向对象圣经"><a href="#面向对象圣经" class="headerlink" title="面向对象圣经"></a>面向对象圣经</h4><p>又名“神不在的星期天”</p>
<table>
<thead>
<tr>
<th>序列</th>
<th>内容</th>
<th>说明</th>
<th>相关人物</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>编译器</td>
<td></td>
<td>John Warner Backus 计算机科学先驱之一、图灵奖获得者</td>
</tr>
<tr>
<td>2</td>
<td>函数、数据结构</td>
<td>程序=算法+数据结构</td>
<td>Dennis Ritchie C语言之父、UNIX创造者之一</td>
</tr>
<tr>
<td>3</td>
<td>Object</td>
<td><code>typedef struct Stack {...} Stack;</code></td>
<td>Alan Kay 面向对象编程思想的创始人之一</td>
</tr>
<tr>
<td>4</td>
<td>Class</td>
<td>重复的方法代码公共化，隐藏this/self。<code>Stack* stack = new Stack();</code></td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>继承、多态、设计模式 =&gt; 复用</td>
<td>优先使用组合而不是继承，面向接口编程而不是面向实现编程</td>
<td>Erich Gamma … 《设计模式：可复用面向对象软件的基础》</td>
</tr>
<tr>
<td>6</td>
<td>抽象</td>
<td>系统需求抽象成高层的概念，在概念层次进行编程</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>休息……</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="通用特性"><a href="#通用特性" class="headerlink" title="通用特性"></a>通用特性</h4><p>冯·诺依曼计算机</p>
<table>
<thead>
<tr>
<th>通用特性</th>
<th>说明</th>
<th>范例</th>
</tr>
</thead>
<tbody><tr>
<td>面向对象</td>
<td>封装、继承、多态，Prototype / Mixin / Traits / Duck Typing</td>
<td></td>
</tr>
<tr>
<td>函数式编程</td>
<td>高阶函数、闭包、惰性求值、递归、不可变状态、无副作用……</td>
<td>JVM: Lisp, Clojure</td>
</tr>
<tr>
<td>元编程</td>
<td></td>
<td>Java动态代理CgLib，Lisp宏</td>
</tr>
<tr>
<td>并发模型</td>
<td>同步与互斥、锁、死锁、软件事务内存……</td>
<td>Java线程，Python协程，Go routine, Erlang Actor</td>
</tr>
<tr>
<td>虚拟机和垃圾回收</td>
<td></td>
<td>JVM垃圾回收</td>
</tr>
<tr>
<td>静态类型、动态类型、类型推导</td>
<td>静态类型：编译期确定。动态类型：运行期确定</td>
<td></td>
</tr>
<tr>
<td>抽象语法树</td>
<td>AST=Abstract Syntax Trees</td>
<td></td>
</tr>
<tr>
<td>指针</td>
<td></td>
<td>C语言的灵魂</td>
</tr>
<tr>
<td>其它</td>
<td>错误处理（异常）、泛型、同步异步、序列化</td>
<td></td>
</tr>
</tbody></table>
<h2 id="码农翻身"><a href="#码农翻身" class="headerlink" title="码农翻身"></a>码农翻身</h2><ul>
<li>用通俗易懂的方式讲解技术。用故事讲解技术的本质。</li>
<li>软件开发不就是抽象嘛。</li>
<li>既然改变不了别人，那就改变一下自己吧。</li>
<li>创造一个新工具，造福大家的想法一直激励着自己，有时候甚至觉得很快乐，不觉得累，每天都恋恋不舍地去上床睡觉。</li>
<li>大部分人只会抱怨项目很无趣、没有挑战，遇到问题也只会安于现状。只有少数人会发现工作中的“痛点”，并且真正动手解决它，给公司带来价值。这是提高自己，让自己和别人区分开来的重要方法。</li>
<li>源码之前，了无秘密。</li>
<li>软件的复杂性，尤其是复杂在细节上。</li>
<li>只要思考就有进步。</li>
<li>所谓编程，就是把自然语言的需求翻译成计算机语言，让计算机去执行。需要养成面向计算机的思维方式。</li>
<li>抽象大法好，用起来多简单、多友好。</li>
<li>不要被纷繁的现象迷住了双眼，要看透背后的本质，做出适当的抽象。</li>
<li>轻敌是最可怕的。</li>
<li>公平实在是一个稀缺货，不公平才是常态！年轻人不要总是抱怨这个社会，没用的，还是老老实实地奋斗吧。</li>
<li>每个人都要誓死捍卫自己的密码。</li>
<li>最宝贵的东西是数据，外界系统可以变，但是数据不能丢。（数据无价）</li>
</ul>
<p>好莱坞原则：不要给我们打电话，我们会打给你的（Don’t call us, we’ll call you）。</p>
<h3 id="1-计算机"><a href="#1-计算机" class="headerlink" title="1. 计算机"></a>1. 计算机</h3><p>速度飞快的CPU，健忘的内存，慢如蜗牛的硬盘，任劳任怨的网卡……</p>
<h4 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h4><p>线程：把一个进程当成资源的容器，在里面运行几个轻量级的进程。线程共享进程的所有资源，如地址空间、全局变量、文件源等。</p>
<p>多个资源加锁，按照资源“大小”比较，从最大的开始加锁。<br>资源“大小”：把资源变成一个数来比较，比如，可以用用字符串的hashcode来比较。</p>
<h4 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h4><p>TCP连接是虚拟的，连接的状态信息并不会在路上保存；相反，连接的状态信息是在两端维持的。<br>三次握手主要是为了验证客户端和服务器的发信和收信能力没问题，证明连接是通的。</p>
<p>所谓的TCP，无非就是在那些不可靠传输的基础上建立一种可靠的发送办法，基本上就是失败重发。<br>比如，滑动窗口，累积确认，分组缓存，流量控制。</p>
<table>
<thead>
<tr>
<th>次序</th>
<th>客户端</th>
<th>服务器</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>==&gt;&gt;</td>
<td>==&gt;&gt;</td>
</tr>
<tr>
<td>2</td>
<td>&lt;&lt;==</td>
<td>&lt;&lt;==</td>
</tr>
<tr>
<td>3</td>
<td>==&gt;&gt;</td>
<td>==&gt;&gt;</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>客户端知道的</th>
<th>发信</th>
<th>收信</th>
</tr>
</thead>
<tbody><tr>
<td>客户端</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>服务器</td>
<td>2</td>
<td>2</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>服务器知道的</th>
<th>发信</th>
<th>收信</th>
</tr>
</thead>
<tbody><tr>
<td>客户端</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>服务器</td>
<td>3</td>
<td>1</td>
</tr>
</tbody></table>
<blockquote>
<p>要想知道自己和对方的发送和接收能力是否正常，只需要自己向对方发信并且接收到对方的回复即可。</p>
</blockquote>
<h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><p>DMA = Direct Memory Access 直接内存访问<br>程序都是由顺序、跳转（分支、循环）组成的。</p>
<h4 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h4><ol>
<li><p>批处理系统</p>
</li>
<li><p>多道程序<br>PCB = Processing Control Block 进程控制块<br>MMU = Memory Management Unit 内存管理单元<br>静态重定位：直接修改程序的指令。<br>动态重定位：指令的地址，加上基址寄存器保存的起始地址。</p>
</li>
<li><p>分时系统<br>时间片：CPU运行时间拆分，一个进程运行一段时间让出CPU，让别的进程使用。</p>
</li>
</ol>
<p>对每个程序，不要全部装入内存，要分块装载。比如，先装载最重要的代码指令，在运行中再按需装载其他的。<br>页框 Page Frame：物理地址空间的小的内存块，每个为4KB。装载程序时按照页框大小进行。</p>
<p>虚拟内存：程序中的指令使用该空间，CPU的MMU把它们映射为真实的物理地址。<br>分页。页 Page：把虚拟地址空间分块，每个为4KB。<br>页表：用来映射虚拟页面和物理页面。</p>
<p>分段：一个程序被分成代码段、数据段、堆栈段（运行时堆、用户栈）等。</p>
<p>程序 - 段页式管理<br>[分段] -&gt; 逻辑地址：段号 =段表=&gt;基址 | 偏移量<br>[分页] -&gt; 虚拟地址：页号 =页表=&gt;页框号 | 偏移量<br>       -&gt; 物理地址</p>
<p>进程结束后，内存中的数据会被清理、覆盖。</p>
<h4 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h4><p>文件对人类来说是最小的存储单位。<br>每个目录也是一个inode，有目录的属性、存放该目录内容的磁盘块号等，在磁盘块中材真正地存放着目录下的内容。</p>
<p>超级块中包含磁盘块总数、每个磁盘块的大小、空闲块的个数、inode个数等重要信息。<br>文件系统的种类：NTFS, FAT, Ext2, Ext3, …</p>
<h4 id="I-O设备"><a href="#I-O设备" class="headerlink" title="I/O设备"></a>I/O设备</h4><p>卡：适配器。</p>
<p>I/O设备分类：</p>
<ul>
<li>分类1：<ul>
<li>块设备：数据存储在固定大小的块中，每个块都有一个地址。如：硬盘、CD-ROM、U盘等。</li>
<li>字符设备：由一个个字符组成的流，没有地址。如：键盘、鼠标、打印机。</li>
</ul>
</li>
<li>分类2：<ul>
<li>存储设备。如：硬盘。</li>
<li>传输设备。如网卡、调制解调器。</li>
<li>人机交互设备。如：键盘、鼠标、显示器。</li>
</ul>
</li>
</ul>
<h4 id="数据库-1"><a href="#数据库-1" class="headerlink" title="数据库"></a>数据库</h4><p>事务日志，两条简单的规则：</p>
<ul>
<li>在把新数据写入硬盘的数据文件之前，先把对应的日志写入硬盘的日志文件。</li>
<li>[提交事务 T1]等的undo日志记录一定要在所有的新数据写入硬盘之后再写入。</li>
</ul>
<p>数据库实现：查询解释器，查询执行引擎，缓冲区管理，授权管理，事务管理；数据，索引，元数据。</p>
<h4 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h4><p>Socket = (IP, Port)</p>
<p>TCP是两个进程之间的通信。<br>TCP的连接必须得通过（client ip, client port, server ip, server port）来确定。<br>进程号是一个动态的东西，如果服务器端的进程重启了，进程号就变了。</p>
<p>Bill Joy，天才程序员，主要工作包括BSD UNIX操作系统、实现TCP/IP协议栈、vi编辑器、C Shell、NFS、SPARC处理器、JINI等。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// Socket client伪代码</span>
clientfd <span class="token operator">=</span> <span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">connect</span><span class="token punctuation">(</span>clientfd<span class="token punctuation">,</span> serverip<span class="token punctuation">,</span> serverport<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">send</span><span class="token punctuation">(</span>clientfd<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">receive</span><span class="token punctuation">(</span>clientfd<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">close</span><span class="token punctuation">(</span>clientfd<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">// 浅浅封装一下
class Socket {
  private: 
    clientfd;
  public:
    Socket(serverip, serverport, ...) {
      this-&gt;clientfd = socket(...);
      connect(this-&gt;clientfd, serverip, serverport, ...);
    }
    Send(data) {
      send(this-&gt;clientfd, data);
    }
    Receive(...) {
      receive(this-&gt;clientfd, ...);
    }
    ~Socket() {
      close(this-&gt;clientfd);
    }
};

auto mySocket = new Socket(...);
mySocket-&gt;Send(data);
mySocket-&gt;Receive(...);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="翻译语言"><a href="#翻译语言" class="headerlink" title="翻译语言"></a>翻译语言</h4><p>机器语言。0 1<br>汇编语言。助记符。贴近机器，运行效率高；难以结构化编程。<br>高级语言。面向人类</p>
<p>编译的过程：<br>源程序<br>-&gt; 词法分析：“大刀向源程序头上砍去”，分成的每个片段叫作Token。<br>-&gt; 语法分析：根据上下文无关语法理论，将Token按照语法规则构建成AST，其中的表示式递归定义。AST = Abstract Syntax Tree 抽象语法树<br>-&gt; 语义分析：检查标识符的类型及作用域是否正确、运算是否合法、取值范围有没有问题等。<br>-&gt; 中间代码生成<br>-&gt; 代码优化<br>-&gt; 代码生成。</p>
<h4 id="进程同步"><a href="#进程同步" class="headerlink" title="进程同步"></a>进程同步</h4><p>多线程并发运行解决共享变量的方法：加锁。</p>
<ol>
<li><p>自旋锁：无限循环。<br> 不可重入：不能重新进入同一个函数。<br> 解决方法：引入计数器，申请时计数器+1，释放时计数器-1，计数器为0才表示真正地释放锁。</p>
</li>
<li><p>信号量 Semaphore：一个整数，基于该整数的两个操作 - wait &amp; signal。<br>操作系统在内核实现操作，可以通过屏蔽中断不让程序进行切换，保证原子性。</p>
</li>
</ol>
<p>wait &amp; signal</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> s<span class="token punctuation">;</span>

<span class="token function">wait</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>s <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  s<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">signal</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  s<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 互斥使用 - 信号量</span>
<span class="token keyword">int</span> lock <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">wait</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// =&gt; 获得一个互斥锁</span>
<span class="token comment">// do some things...</span>
<span class="token function">signal</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 释放锁</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>改进的 wait &amp; signal<br>解决“忙等待”（wait()函数在s &lt;= 0时一直循环浪费CPU）</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typeof</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> value<span class="token punctuation">;</span>
  <span class="token keyword">struct</span> <span class="token class-name">process</span><span class="token operator">*</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span> semaphore<span class="token punctuation">;</span>

<span class="token function">wait</span><span class="token punctuation">(</span>semaphore<span class="token operator">*</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  s<span class="token operator">-&gt;</span>value<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token operator">-&gt;</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    让自己进入阻塞状态，加入等待队列 s<span class="token operator">-&gt;</span>list<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">signal</span><span class="token punctuation">(</span>semaphore<span class="token operator">*</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  s<span class="token operator">-&gt;</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token operator">-&gt;</span>value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    从等待队列 s<span class="token operator">-&gt;</span>list 中唤醒一个，让它可以继续执行<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解决生产者和消费者的同步问题 - 信号量</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 简化起见，使用“忙等待”版本的信号量</span>
<span class="token keyword">int</span> lock <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> empty <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// 初始队列有5个空位</span>
<span class="token keyword">int</span> full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// 生产者</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// if empty &lt;= 0，表示队列已满，没有空位，需要等待</span>
  <span class="token function">wait</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 加锁</span>
  <span class="token function">wait</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  做事情
  <span class="token comment">// 释放锁</span>
  <span class="token function">signal</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 通知消费者，有东西了</span>
  <span class="token function">signal</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 消费者</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// if full &lt;= 0，表示队列空了，需要等待</span>
  <span class="token function">wait</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 加锁</span>
  <span class="token function">wait</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  做事情
  <span class="token comment">// 释放锁</span>
  <span class="token function">signal</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 通知生产者，有空位了</span>
  <span class="token function">signal</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解决生产者和消费者的同步问题 - JAVA BlockingQueue</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 建立一个队列</span>
<span class="token class-name">BlockingQueue</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 生产者</span>
<span class="token comment">// 如果队列满，则线程自动阻塞，直到有空闲位置</span>
queue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 消费者</span>
<span class="token comment">// 如果队列空，则线程自动阻塞，直到有数据</span>
queue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h4><p>递归：一个函数调用了自己。<br>每个递归函数必须有一个终止条件，否则会无限递归，导致栈溢出。</p>
<p>尾递归：递归调用是函数体中最后执行的语句，并且它的返回值不属于表达式的一部分。现代编译器据此生成优化的代码，复用栈帧。</p>
<p>每个栈帧表示被调用中的一个函数。</p>
<p>计算n的阶乘 factorial。（未考虑边界条件，如n&lt;=0）</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 1. 递归</span>
<span class="token keyword">int</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> n <span class="token operator">*</span> <span class="token function">fac</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">=</span> <span class="token number">24</span>
<span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">6</span>
<span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>
<span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">// 2. 尾递归</span>
<span class="token keyword">int</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> result <span class="token operator">:</span> <span class="token function">fac</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">=</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">=</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">=</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">=</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span>
<span class="token operator">=</span> <span class="token number">24</span>

<span class="token comment">// 3. 迭代</span>
<span class="token keyword">int</span> <span class="token function">fac</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">*=</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-Java"><a href="#2-Java" class="headerlink" title="2. Java"></a>2. Java</h3><p>Java是一门静态的强类型的编程语言。</p>
<h4 id="Java-Class"><a href="#Java-Class" class="headerlink" title="Java Class"></a>Java Class</h4><p>classpath：列举所有应该检查的目录。<br>ClassLoader：Bootsrap ClassLoader -&gt; Extension ClassLoader -&gt; App ClassLoader</p>
<p>基于堆栈的虚拟机，虚拟机的所有指令都是在对栈进行操作。</p>
<h4 id="持久化"><a href="#持久化" class="headerlink" title="持久化"></a>持久化</h4><p>ORM = Object-Relational Mapping 对象关系映射</p>
<p>轻量级O/R Mapping框架：</p>
<ul>
<li>Hiberante</li>
<li>iBatis =&gt; MyBatis =&gt; MyBatis Plus</li>
<li>Spring -&gt; JdbcTemplate</li>
</ul>
<h4 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h4><p>JDBC = Java Database Connectivity</p>
<p>所谓应用层的协议，就是你发什么请求、我给你什么响应、消息的格式和次序等。</p>
<p>连接 Connection：接口，用来代表和数据库的连接。<br>状态 Statement：接口，用来执行SQL。<br>结果集 ResultSet：接口，用来表示SQL返回的结果，提供对数据遍历的方法，比如，next(), getInt(xxx), getString(xxx), …<br>驱动 Driver：接口，<br>Connection可以创建Satement，Statement执行查询可以得到ResultSet。</p>
<p>JDBC类之间的关系</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>  <span class="token comment">// 获取数据库连接</span>
<span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"select id, name from users"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="分布式事务"><a href="#分布式事务" class="headerlink" title="分布式事务"></a>分布式事务</h4><p>全局事务管理器，负责协调各个数据库的事务提交。</p>
<p>强一致性：让两个数据库保持实时的一致性。<br>最终一致性：可以忍受一段时间的不一致，只要最终一致就行。</p>
<p>XA协议：事务管理器 Transaction Manager，局部资源管理器 Local Resource Manager。</p>
<p>幂等性：重复执行，结果一致。</p>
<ol>
<li>两阶段提交：</li>
</ol>
<ul>
<li>预提交阶段 prepare</li>
<li>提交阶段 commit</li>
</ul>
<ol start="2">
<li>三阶段提交：</li>
</ol>
<ul>
<li>canCommit</li>
<li>preCommit</li>
<li>doCommit</li>
</ul>
<ol start="3">
<li>基于消息队列 message queue<br>基本可用，最终一致性。</li>
</ol>
<h4 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h4><p>JNDI = Java Naming and Directory Interface Java命名和目录接口<br>JMS = Java Message Service Java消息服务</p>
<p>点对点模型 Point to Point<br>发布/订阅模型 Publish/Subscribe</p>
<p>JMS代码</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 从配置中找到ConnectionFactory和Destination(Queue)</span>
<span class="token class-name">Context</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InitialContext</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">QueueConnectionFactory</span> factory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">QueueConnectionFactory</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token string">"&lt;orderConnFactory&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Queue</span> orderQueue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Queue</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token string">"orderQueue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Queue</span> deliverQueue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Queue</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token string">"deliverQueue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建Connection和Session</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">crateConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">QueueSession</span> session <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createQueueSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token class-name">Session</span><span class="token punctuation">.</span>AUTO_ACKNOWLEDGE<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建消息生产者并发送消息</span>
<span class="token class-name">MessageProducer</span> producer <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createProducer</span><span class="token punctuation">(</span>orderQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">TextMessage</span> msg <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createTextMessage</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建消息消费者并接收消息</span>
<span class="token class-name">MessageConsumer</span> consumer <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createConsumer</span><span class="token punctuation">(</span>deliverQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">TextMessage</span> deliverMsg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextMessage</span><span class="token punctuation">)</span>consumer<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> text <span class="token operator">=</span> deliverMsg<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/%E7%A0%81%E5%86%9C%E7%BF%BB%E8%BA%AB-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97-JMS.jpg" alt="码农翻身-消息队列-JMS"></p>
<h4 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h4><p>动态代理：在运行时动态地生成类，作为一个真实对象的代理来做事情。因为不能修改现有的类。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// HelloWorld</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IHelloWorld</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">implements</span> <span class="token class-name">IHelloWorld</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// LoggerHandler</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggerHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHander</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">LoggerHandler</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">startLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">endLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用动态代理增强HelloWorld</span>
<span class="token class-name">IHelloWorld</span> hw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">LoggerHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LoggerHandler</span><span class="token punctuation">(</span>hw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">IHelloWorld</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IHelloWorld</span><span class="token punctuation">)</span><span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  hw<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  handler
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h4><p>所谓的注解，有点像加强版的注释。</p>
<p>使用注解，配置靠近代码，容易阅读、容易修改。<br>对于需要集中配置的场合，可以使用XML，比如，数据源的配置。</p>
<p>元数据 Metadata：描述数据的数据。可以给其他数据提供描述性信息。</p>
<p>元注解：注解的注解。</p>
<ul>
<li>@Target：表示该注解的应用目标，可以是类、方法、方法参数等。</li>
<li>@Retention：表示该注解保留到何时，可以是只在源码中、在.class文件中、在运行时。</li>
</ul>
<p>注解的定义和使用只是定义了行为语义。<br>在运行时通过反射的方式获取应用目标的注解，逻辑处理后，通过反射的方式去执行。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 自定义@Test注解</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
  <span class="token keyword">boolean</span> <span class="token function">ignore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用@Test注解</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorTest</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"test add method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>ignore<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSubtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"test substract method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取@Test注解</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUtil</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">CalculatorTest</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalculatorTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">run</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Excpetion</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> m <span class="token operator">:</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Test</span> t <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getDeclaredAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>t<span class="token punctuation">.</span><span class="token function">ignore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m<span class="token punctuation">.</span><span class="token function">invoe</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h4><p>不用膨胀法，而用擦除法（一个参数化的类型经过擦除后会去除参数）。</p>
<h4 id="日志系统"><a href="#日志系统" class="headerlink" title="日志系统"></a>日志系统</h4><p>Logger<br>Appender<br>Formatter</p>
<p>正交性：变化被封装在一个维度上，接口可以任意组合。</p>
<p>SLF4J = Simple Logging Facade for Java<br>Log4j = Log for Java</p>
<p>应用程序<br>-&gt; 抽象层 (SLF4J API)<br>  -&gt; Logback<br>  -&gt; 适配层 -&gt; Log4j, JDK java.util.logging, tinylog, …</p>
<p>SLF4J + Logback<br>Apache Common Logging + Log4j</p>
<h4 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h4><p><del>RMI = Remote Method Invocation 远程方法调用</del><br>RPC = Remote Procedure Call 远程过程调用</p>
<h4 id="加锁"><a href="#加锁" class="headerlink" title="加锁"></a>加锁</h4><p>JNI = Java Native Interface Java本地接口<br>可以用C语言实现，然后在Java中封装。</p>
<ol>
<li>互斥锁<br>互斥：同一时刻只有获得锁的那个线程才有资格去操作共享资源，其它线程都被阻塞了，被放到一个锁池（Lock Pool）的地方，什么也做不了。<br>synchronized - 悲观锁<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sequence</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">int</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> value<span class="token operator">++</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>CAS = Compare and Swap - 乐观锁<br>操作系统和硬件保证原子执行。<br>如果内存的值被被人修改过，那就再次循环尝试。<br>Atomic类：AtomicBoolean, AtomicInteger, AtomicLong, AtomicIntegerArry, AtomicLongArray, AtomicReference, AtomicStampedReference.<br>ConcurrentLinkedQueue<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sequence</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">AtomicInteger</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> next <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> current <span class="token operator">=</span> count<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> next <span class="token operator">=</span> current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> next<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h4>AOP = Aspect Oriented Programming 面向切面编程<br>IoC = Inversion of Control 控制反转<br>DI = Dependency Injection 依赖注入</li>
</ol>
<p>CGLib = Code Generation Library</p>
<p>动态生成代理类的两种方法：</p>
<ul>
<li>使用Java动态代理，要求业务类必须有接口 interface。</li>
<li>使用CGLib，会生成一个业务类的子类来作为代理类，只要业务类没有被标记为final即可。</li>
</ul>
<p>容器创建对象：</p>
<ol>
<li>调用方说：给我一个xxx对象</li>
<li>容器，创建代理类，设置AOP的代码</li>
<li>返回xxx的代理对象</li>
</ol>
<h3 id="3-Web"><a href="#3-Web" class="headerlink" title="3. Web"></a>3. Web</h3><p>WSDL = Web Service Description Language Web服务描述语言<br>SOAP = Simple Object Access Protocol 简单对象访问协议<br>Web服务的描述方式和数据传输方式：</p>
<ul>
<li>WSDL + SOAP。烦琐，都是XML，数据标签冗余。</li>
<li>轻量级的HTTP + JSON</li>
</ul>
<h4 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h4><p>CA = Certificate Authority 认证中心</p>
<p>Hash，哈希/散列<br>常见算法：MD5, SHA等<br>重要特性：</p>
<ul>
<li>不可逆性：从Hash值反推出原消息是不可能的。</li>
<li>抗冲突性：给定消息M1，不存在另一条消息M2，使得Hash(M1)=Hash(M2)。</li>
<li>分布均匀性：Hash算法的结果是均匀分布的。</li>
</ul>
<p>原始信息 –Hash算法–&gt; 消息摘要 –用CA的私钥加密–&gt; 数字签名<br>数字证书 = 原始信息 + 数字签名</p>
<p>对称加密 =&gt; 非对称加密 =&gt; 非对称+对称 =&gt; 数字证书</p>
<p>简化版的HTTPS流程（没有包含Pre-Master Secret）：<br>浏览器 – 服务器<br>==&gt;&gt; 浏览器发出安全请求（<a target="_blank" rel="noopener" href="https://xxx.com)/">https://xxx.com）</a><br>&lt;&lt;== 服务器发送数字证书（包含服务器的公钥）<br>==== 浏览器用预置的CA列表验证证书，如果有问题，则提示风险<br>==&gt;&gt; 浏览器生成随机的对称秘钥，用服务器的公钥加密<br>==== 服务器用自己的私钥进行解密，得到对称秘钥<br>&lt;==&gt; 双方都知道了对称秘钥，用它来加密通信</p>
<h4 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h4><ol>
<li>token -&gt; appid + secrect</li>
<li>授权码 Authorization Code + token -&gt; appid + secret + code</li>
</ol>
<p>OAuth = Open Authorization<br>认证方式：</p>
<ul>
<li>Resource Owner Password Credential Grant 资源所有者密码凭证许可</li>
<li>Implicit Grant 隐式许可</li>
<li>Authorization Code Grant 授权码许可</li>
</ul>
<p>资源所有者，资源服务器，客户端，授权服务器</p>
<h4 id="系统的高可用和负载均衡"><a href="#系统的高可用和负载均衡" class="headerlink" title="系统的高可用和负载均衡"></a>系统的高可用和负载均衡</h4><p>Redis的Java客户端软件Jedis。<br>使用Jedis访问缓存：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 初始化pool，192.168.0.10为缓存服务器地址</span>
<span class="token class-name">JedisPool</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"192.168.0.10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>要保存的用户对象<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 关闭pool</span>
pool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>缓存服务器集群的负载均衡</li>
</ol>
<ul>
<li><del>余数算法</del><br>对于用户要存储的(key, value)，计算出key的一个整数Hash值，然后用这个Hash值对服务器数据求余数。<br>但是在增删缓存服务器时，缓存会失效。</li>
<li>一致性哈希算法<br>当增删缓存服务器时，只会影响相邻节点的缓存数据，其它部分的数据与原来保持一致。<br>能极大地解决缓存失效问题，把失效的缓存控制在特定的区间。</li>
<li>哈希槽 Hash Slot<br>共有16384个槽，每台服务器分管其中一部分。<br>分发数据 - CRC16(key)%16384，对key产生一个整数值然后求余</li>
</ul>
<p>CRC = Cyclic Redundancy Check 循环冗余校验</p>
<ol start="2">
<li><p>高可用的Nginx<br>Keepalived - 将Nginx集群分成master-slave结构，同一时刻只有一个工作，另一个原地待命，挂掉则接管；对外只提供一个IP地址。</p>
</li>
<li><p>高可用的Tomcat<br>把session放到Redis集群中</p>
</li>
<li><p>数据库的读写分离：<br>一个master库，多个slave库。<br>master库可读可写，slave库只能读、不能写。最后还要将master库的数据尽快复制到slave库，让数据保持一致。</p>
</li>
</ol>
<h4 id="微服务-microservice"><a href="#微服务-microservice" class="headerlink" title="微服务 microservice"></a>微服务 microservice</h4><p>OA = Office Automation 办公自动化<br>CRM = Customer Relationship Management 客户关系管理系统<br>ERP = Enterprise Resource Planning 企业资源计划<br>SOA = Service Oriented Architecture 面向服务架构<br>ESB = Enterprise Service Bus 企业服务总线<br>SCA = Service Component Architecture 服务组件架构<br>BEPL = Business Execution Process Language 业务执行过程语言</p>
<p>不是集成，而是拆分。<br>让小组件能完全独立地开发、测试和部署。</p>
<h4 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h4><p>最佳实践：不断寻找好的实现方式，找到以后就把各种经验固化下来。<br>框架就像一个模板，里面预置了一些公认的最佳实践。<br>框架是一个半成品，是无法独立运行的，必须由开发人员按照它定义的规则，把项目代码放置到指定的地方，由框架整合起来，这才是一个完整的应用程序。</p>
<p>学无止境啊！<br>Java SE - 集合、线程、反射、I/O、泛型、注解……<br>Java后端 - 系统架构设计、缓存、性能、高可用性、分布式、安全、备份……</p>
<h4 id="HTTP-Server"><a href="#HTTP-Server" class="headerlink" title="HTTP Server"></a>HTTP Server</h4><p>fd = file descriptor 文件描述符，是一个整数</p>
<ol>
<li><p>单进程，阻塞式</p>
</li>
<li><p>多进程</p>
</li>
<li><p>select模型<br>一个进程最多只能监控1024个socket。</p>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/%E7%A0%81%E5%86%9C%E7%BF%BB%E8%BA%AB-http_server-select%E6%A8%A1%E5%9E%8B.jpg" alt="码农翻身-http_server-select模型"></p>
<ol start="4">
<li>epoll模型<br>操作系统只会告诉http server那些可以读/写（准备就绪）的socket，<br>不需要遍历全部集合，只需要处理那些有变化的、活跃的socket fd。</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/sstian/images/blogimg/%E7%A0%81%E5%86%9C%E7%BF%BB%E8%BA%AB-http_server-epoll%E6%A8%A1%E5%9E%8B.jpg" alt="码农翻身-http_server-epoll模型"></p>
<h3 id="4-代码管理那些事儿"><a href="#4-代码管理那些事儿" class="headerlink" title="4. 代码管理那些事儿"></a>4. 代码管理那些事儿</h3><p>VCS = Version Control System 版本控制系统</p>
<ul>
<li>集中式：代码仓库共享，只在服务器端，如：CVS, SVN</li>
<li>分布式：每个人都有一个本地私有代码仓库，服务器端代码仓库共享，如：Git, Mercury, IBM RTC</li>
</ul>
<p>Pull Request 拉取请求：请求项目维护者拉取自己的修改。<br>GitHub：Web版本的代码托管平台</p>
<p>Maven之路径的约定：“约定重于配置”</p>
<table>
<thead>
<tr>
<th>文件</th>
<th>路径</th>
</tr>
</thead>
<tbody><tr>
<td>Java源文件</td>
<td>src/main/java</td>
</tr>
<tr>
<td>Resource文件</td>
<td>src/main/resources</td>
</tr>
<tr>
<td>Web应用的源码</td>
<td>src/main/webapp</td>
</tr>
<tr>
<td>Java单元测试源文件</td>
<td>src/test/java</td>
</tr>
<tr>
<td>Java单元测试Resource文件</td>
<td>src/test/resources</td>
</tr>
<tr>
<td>编译后的Java class文件</td>
<td>target/classes</td>
</tr>
</tbody></table>
<p>面向对象的代码是针对接口编程的。<br>重构的过程基本就是一个重新设计的过程。很少公司能推倒重来，要么业务发生了变革，要么技术进行了转型；慢慢重构，所谓的革新，而不是革命。<br>TDD = Test Driven Development 测试驱动开发</p>
<p>《修改代码的艺术》，接缝：程序中一些特殊的点，在这些点上无需修改现有代码，只需要编写扩展代码就可以达到改动程序行为的目的。Mock代码通常可以在这里安插。<br>Mock工具：EasyMock, Jmockit<br>如何做单元测试，关键在于如何处理遗留代码。<br>优秀的单元测试：<br>1.单元测试是“白盒测试”，应该覆盖各个分支流程、异常条件。<br>2.单元测试面向的是一个单元（Unit），是由Java中的一个类或者几个类组成的单元。<br>3.单元测试的运行速度一定要快！<br>4.单元测试一定是可重复执行的！<br>5.单元测试之间不能有相互依赖，应该是独立的！<br>6.单元测试代码和业务代码同等重要，要一并维护！</p>
<h3 id="5-我的编程语言简史"><a href="#5-我的编程语言简史" class="headerlink" title="5. 我的编程语言简史"></a>5. 我的编程语言简史</h3><p>前端“三剑客”：<br>HTML负责结构布局<br>CSS负责美化展示<br>JavaScript负责交互逻辑</p>
<p>JavaScript，操作HTML的DOM和浏览器。<br>XMLHttpRequest，允许JavaScript直接向服务器发起接口调用。<br>AJAX = Asynchronous JavaScript And XML，用作的异步处理方式，使得网页局部刷新。</p>
<p>Node.js，使用Chrome V8引擎执行JavaScript，用于服务端。只用一个线程处理所有请求，事件驱动编程。</p>
<p>C语言，代码的可移植性，并非程序的可移植性。做系统级编程，使用指针直接操作内存、和硬件交互，追求性能和效率。<br>代码指源代码，不同系统平台使用条件编译。程序指编译后的。<br><em>.exe一旦运行，那就是一个独立的进程，拥有一个独立的地址空间，被CPU独立调度。<br>Java虚拟机（java.exe）才是一个进程，</em>.class被装载以后只能在这个进程里作为一个线程来运行。<br>链接：把一个符号（调用的函数的名称）和这个符号的地址（调用的函数的真正地址，有该函数的指令）绑定起来。<br>C在编译时链接，即静态链接。Java在运行时链接，即动态链接。</p>
<p>C++之父：现在C++教育似乎进入了一个怪圈，要教会一个人C++，唯一的办法就是把他教成C++高手。<br>学习编程语言的经验：多读书，多实践，多看优秀的源码。<br>书籍：《C++ Primer》《深入理解C++对象模型》《Effective C++》《VC++技术内幕》《深入浅出MFC》</p>
<p>Java，最适合后端编程。Applet，速度慢，还丑。<br>书籍：《Effective Java》《Java编程思想》《Java核心技术》《深入Java虚拟机》</p>
<p>DSL = Domain Specific Language 领域特定语言<br>SQL就是对数据库操作的DSL。</p>
<p>Ruby on Rails (RoR) 利用Ruby语言近乎“变态”的灵活性，以及“约定重于配置”的实践，把Web开发简化到了极致。<br>Ruby代码简洁、优雅、富有表现力。</p>
<p>在一台冯·诺依曼计算机中，最核心的就是CPU和指令，指令和数据就存放在内存当中，CPU每次取出一条指令，译码、执行，然后把结果写回内存，本质就这么简单。</p>
<p>函数式编程 Functional Programming：<br>一种”编程范式”（programming paradigm），即如何编写程序的方法论。<br>属于”结构化编程”的一种，主要思想是把运算过程尽量写成一系列嵌套的函数调用。<br>特性：声明式，闭包/仿函数（functor）对象和高阶函数，惰性计算，用递归而不用迭代。<br>特点：</p>
<ol>
<li>函数是”第一等公民”<br>函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为别的函数的返回值。</li>
<li>只用”表达式”，不用”语句”<br>每一步都是单纯的运算，而且都有返回值。<br>“表达式”（expression）是一个单纯的运算过程，总是有返回值；”语句”（statement）是执行某种操作，没有返回值。</li>
<li>没有”副作用”<br>函数要保持独立，所有功能就是返回一个新的值，没有其他行为，尤其是不得修改外部变量的值。<br>“副作用”（side effect），指的是函数内部与外部互动（最典型的情况，就是修改全局变量的值），产生运算以外的其他结果。</li>
<li>不修改状态<br>只是返回新的值，不修改系统变量。使用参数保存状态，最好的例子就是递归。</li>
<li>引用透明性<br>同样的输入，函数总是返回同样的结果。</li>
</ol>
<h3 id="6-老司机的精进"><a href="#6-老司机的精进" class="headerlink" title="6. 老司机的精进"></a>6. 老司机的精进</h3><p>世上哪儿有等你完全准备好以后才开始的事情？你觉得完全准备好以后，黄花菜都凉了。<br>对于性格内向的程序员，很多时候你认为基本准备好了其实就够了，凡是必先骑上虎背，勇敢地迈出去，努力地争取一下，你就会发现自己登上了更高一层的台阶。</p>
<p>码农“潜规则”：</p>
<ol>
<li>局部性原理<br>在一段时间内，整个程序的执行仅限于程序的某一部分，相应地，程序访问的存储空间也局限于某个内存区域。局部性原理具体分为两类。</li>
<li>时间局部性：如果程序中的某条指令一旦执行，则不就之后该指令可能再次被执行；如果某数据被访问，则不久之后该数据可能再次被访问。</li>
<li>空间局部性：是指一旦程序访问了某个存储单元，则不久之后，其附近的存储单元也将被访问。</li>
<li>缓存</li>
<li>抽象<br>《深入理解计算机系统》：指令集是对CPU的抽象，文件是对输入/输出设备的抽象，虚拟存储是对程序存储的抽象，进程是对一个正在运行的程序的抽象，而虚拟机是对整个计算机（包括操作系统、处理器和程序）的抽象。</li>
<li>分层<br>通过层次把复杂的、可能变化的东西隔离开来，某一层只能访问它的直接上层和下层，不能跨层访问。隔离变化。</li>
<li>异步调用</li>
<li>分而治之<br>基本思想是：将一个规模比较大的问题分解为多个规模较小的子问题，这些子问题相互独立且与原问题性质相同，求出子问题的解，最后组合起来就可得到原问题的解。</li>
</ol>
<p>架构师的总结：</p>
<ol>
<li>好奇心<br>没有好奇心，没有兴趣，怎么会产生Passion（激情）呢？对技术的好奇心/兴趣是一切的基础。</li>
<li>养成计算机的思维方式<br>程序员的基本功：养成计算机的思维方式，流畅地把人类语言的需求转换成计算机语言。<br>基本功的训练就是算法和数据结构；经验是多做习题，让思维在脑子里固化，以后的编程就可以信手拈来了。</li>
<li>扎实基础，融会贯通<br>计算机组成原理、操作系统、编译原理、计算机网络、数据库、汇编语言。</li>
<li>要透彻地理解一门技术的本质<br>只有学会使用是不行的，不但要知道How，还要知道Why。<br>停下来，思考，才是进步的本质。</li>
<li>能写漂亮的代码<br>写出漂亮代码并不容易，需要思路清晰，有良好的编程基础，有优秀的抽象能力，以及对一门语言的熟练掌握。</li>
<li>抽象的能力<br>把纷杂的事物抽象到数学层面，已经非常难了；哲学层面是尽头。<br>正交在数学上指的是线性无关。正交的威力在于互不影响、扩展方便。<br>抽象能力的训练没有捷径，就是积累经验、勤于思考、善于学习。</li>
<li>技术领导力<br>要用技术的影响力来领导人，而不是权威和职位。<br>有了技术领导力，你在团队里发出的声音才会被倾听、被尊重。<br>贴上标签：大牛（大佬）。</li>
</ol>
<p>看书，知识体系更加完整、理解更有深度。<br>写作：写笔记、写博客，从内容的消费者变成内容的生产者。<br>“转教别人”（Teach others）的办法属于主动学习，效率是最高的。</p>
<h2 id="公众号文章"><a href="#公众号文章" class="headerlink" title="公众号文章"></a>公众号文章</h2><p>程序员的圣地：</p>
<ul>
<li>量子力学</li>
<li>晶体管</li>
<li>逻辑电路</li>
<li>指令集/机器语言</li>
<li>汇编语言</li>
<li>高级语言</li>
<li>应用程序</li>
</ul>
<p>技术管理者：既要管人，又要管事。特点是快速学习。通过漂亮的代码“征服”程序员，通过良好的沟通说服程序员。进可成为某个领域的专家，退可转型为管理者。</p>
<ul>
<li>基础不牢，地动山摇。</li>
<li>Joel Spolsky：抽象只能节省你的工作时间，不能节省你的学习时间。</li>
<li>Lisp大佬Richard P. Gabriel：Worse is better。软件设计有四个目标：简单性，正确性，一致性，完整性。</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="../../about" rel="external nofollow noreferrer">SS Tian</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://sstian.github.io">https://sstian.github.io</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="../../about" target="_blank">SS Tian</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="../../tags/%E5%88%98%E6%AC%A3/">
                                    <span class="chip bg-color">刘欣</span>
                                </a>
                            
                                <a href="../../tags/coderising/">
                                    <span class="chip bg-color">coderising</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="../../libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="../../libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我们前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="../../medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="../../medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="../../reading/luxun-story/">
                    <div class="card-image">
                        
                        
                        <img src="../../medias/featureimages/20.jpg" class="responsive-img" alt="鲁迅故事集">
                        
                        <span class="card-title">鲁迅故事集</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-01-05
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="../../categories/Reading/" class="post-category">
                                    Reading
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="../../tags/Book/">
                        <span class="chip bg-color">Book</span>
                    </a>
                    
                    <a href="../../tags/%E9%B2%81%E8%BF%85/">
                        <span class="chip bg-color">鲁迅</span>
                    </a>
                    
                    <a href="../../tags/Story/">
                        <span class="chip bg-color">Story</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="../../couple-fourteen-things/">
                    <div class="card-image">
                        
                        
                        <img src="../../medias/featureimages/9.jpg" class="responsive-img" alt="适合情侣间做的十四件事">
                        
                        <span class="card-title">适合情侣间做的十四件事</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-08-14
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="../../categories/Emotion/" class="post-category">
                                    Emotion
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="../../tags/Couple/">
                        <span class="chip bg-color">Couple</span>
                    </a>
                    
                    <a href="../../tags/Feeling/">
                        <span class="chip bg-color">Feeling</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="../../libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="../../libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="../../libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="../../libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="../../libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="../../libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='1'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="../../libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2023</span>
            
            <!-- <span id="year">2019</span> -->
            <a href="../../about" target="_blank">SS Tian</a>
            All Rights Reserved
            <br>
            <a href="https://beian.miit.gov.cn/" target="_blank">沪ICP备2022016418号</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">319.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2019";
                    var startMonth = "11";
                    var startDate = "10";
                    var startHour = "22";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/sstian" class="tooltipped" target="_blank" data-tooltip="GitHub: https://github.com/sstian" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:st.tian@foxmail.com" class="tooltipped" target="_blank" data-tooltip="Foxmail邮箱: st.tian@foxmail.com" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1344082191" class="tooltipped" target="_blank" data-tooltip="QQ: 1344082191" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/SnowDream04" class="tooltipped" target="_blank" data-tooltip="新浪微博: https://weibo.com/SnowDream04" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/tuercao" class="tooltipped" target="_blank" data-tooltip="知乎: https://www.zhihu.com/people/tuercao" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="https://blog.csdn.net/qq_27114909" class="tooltipped" target="_blank" data-tooltip="CSDN: https://blog.csdn.net/qq_27114909" data-position="top" data-delay="50">
        <i class="fab fa-csdn">C</i>
    </a>



</div>
    </div>

    <!-- 看板娘 -->
    <div class="pio-container right">
        <div class="pio-action"></div>
        <canvas id="pio" width="200" height="250"></canvas>
    </div>
    <link rel="stylesheet" href="/css/pio.css">
    <script src="/js/pio.js"></script>
    <script src="/js/live2d.js"></script>
    <script>
        var pio = new KanbanPio({
            "mode": "draggable",
            "tips": true,
            "hidden": true,
            "content": {
                "welcome": ["欢迎来到我的网站！", "博主每天都有些折腾记录，欢迎前往TA的小窝阅读~"],
            },
            "model": [
                "/models/live2d-widget-model-koharu/assets/koharu.model.json",
                // "/models/live2d-widget-model-haruto/assets/haruto.model.json"
            ]
        });
    </script>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('../../search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="../../libs/materialize/materialize.min.js"></script>
    <script src="../../libs/masonry/masonry.pkgd.min.js"></script>
    <script src="../../libs/aos/aos.js"></script>
    <script src="../../libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="../../libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="../../js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="../../libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="../../libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="../../libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
